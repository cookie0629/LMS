# LMS 项目学习路径总结

## 📖 文档导航

我已经为你创建了以下学习文档：

1. **项目学习指南.md** - 完整的项目分析和技术栈说明
2. **快速入门指南.md** - 环境搭建和快速开始步骤
3. **编码实践任务.md** - 循序渐进的实践任务清单
4. **学习路径总结.md**（本文档）- 学习路径概览

---

## 🗺️ 学习路径概览

```
阶段 0: 环境准备 (1-2天)
    ↓
阶段 1: 理解核心概念 (3-5天)
    ↓
阶段 2: 音频文件处理 (5-7天)
    ↓
阶段 3: 文件扫描系统 (7-10天)
    ↓
阶段 4: 数据库设计 (5-7天)
    ↓
阶段 5: Web UI 基础 (7-10天)
    ↓
阶段 6: 核心功能实现 (10-15天)
    ↓
阶段 7: 高级功能 (10-15天)
    ↓
阶段 8: API 实现 (7-10天)
```

**总预计时间：2-3 个月**（每天 2-3 小时）

---

## 🎯 第一阶段：环境准备（立即开始）

### 目标
- ✅ 搭建开发环境
- ✅ 成功编译项目
- ✅ 运行并访问 Web 界面

### 关键步骤
1. **选择开发环境**
   - Windows: 使用 WSL2（推荐）
   - Linux: 直接安装依赖
   - Docker: 最简单但不利于开发

2. **安装依赖**
   - 参考 `快速入门指南.md` 中的详细步骤
   - 特别注意 Wt 框架的安装

3. **编译项目**
   ```bash
   mkdir build && cd build
   cmake .. -DCMAKE_BUILD_TYPE=Debug
   make -j$(nproc)
   ```

4. **运行测试**
   - 确保程序能够启动
   - 访问 Web 界面

### 成功标准
- [ ] 项目能够成功编译
- [ ] 程序能够运行
- [ ] 能够访问 Web 界面（即使没有音乐库）

---

## 📚 第二阶段：理解项目（第 1 周）

### 目标
理解项目的整体架构和核心概念

### 学习重点

#### 1. 程序入口（第 1 天）
- **文件**: `src/lms/main.cpp`
- **重点**:
  - 程序启动流程
  - 服务初始化顺序
  - 配置加载
- **实践**: 添加日志语句，观察启动过程

#### 2. 配置系统（第 2 天）
- **文件**: `conf/lms.conf`, `src/libs/core/include/core/IConfig.hpp`
- **重点**:
  - 配置文件格式
  - 配置读取 API
  - 默认值处理
- **实践**: 添加自定义配置项

#### 3. 日志系统（第 2 天）
- **文件**: `src/libs/core/include/core/ILogger.hpp`
- **重点**:
  - 日志级别
  - 日志输出
  - 日志格式
- **实践**: 修改日志级别，观察不同输出

#### 4. 数据库架构（第 3-4 天）
- **文件**: `src/libs/database/include/database/`
- **重点**:
  - 数据库连接
  - ORM 映射
  - 数据对象关系
- **实践**: 使用 sqlite3 查看数据库结构

#### 5. 服务架构（第 5 天）
- **文件**: `src/libs/services/`
- **重点**:
  - 服务接口设计
  - 服务依赖
  - 服务生命周期
- **实践**: 阅读一个简单服务的实现

### 成功标准
- [ ] 能够解释程序的启动流程
- [ ] 能够修改配置并看到效果
- [ ] 理解数据库的基本结构
- [ ] 能够找到并理解各个服务

---

## 🎵 第三阶段：音频处理（第 2 周）

### 目标
理解如何读取和处理音频文件

### 学习重点

#### 1. 音频文件接口（第 1-2 天）
- **文件**: `src/libs/audio/include/audio/IAudioFileInfo.hpp`
- **重点**:
  - 音频属性（时长、比特率、采样率）
  - 标签读取接口
  - 图像提取接口

#### 2. TagLib 使用（第 3-4 天）
- **文件**: `src/libs/audio/impl/taglib/`
- **重点**:
  - 如何打开音频文件
  - 如何读取标签
  - 多值标签处理
- **实践**: 编写程序读取 MP3 标签

#### 3. FFmpeg 集成（第 5 天）
- **文件**: `src/libs/audio/impl/ffmpeg/`
- **重点**:
  - FFmpeg API 使用
  - 音频属性读取
  - 错误处理

#### 4. 音频解析流程（第 6-7 天）
- **文件**: `src/libs/audio/impl/ParseAudioFileInfo.cpp`
- **重点**:
  - 文件格式检测
  - 解析器选择
  - 异常处理
- **实践**: 处理不同格式的音频文件

### 成功标准
- [ ] 能够读取音频文件的基本信息
- [ ] 能够提取标签数据
- [ ] 能够提取嵌入的封面图片
- [ ] 理解不同解析器的使用场景

---

## 🔍 第四阶段：扫描系统（第 3 周）

### 目标
理解如何扫描文件系统并导入音乐

### 学习重点

#### 1. 扫描服务接口（第 1 天）
- **文件**: `src/libs/services/scanner/include/services/scanner/IScannerService.hpp`
- **重点**:
  - 扫描请求
  - 扫描状态
  - 扫描事件

#### 2. 文件系统遍历（第 2-3 天）
- **重点**:
  - 递归目录遍历
  - 文件过滤
  - 符号链接处理

#### 3. 元数据提取和匹配（第 4-5 天）
- **重点**:
  - 从文件路径推断信息
  - 匹配艺术家和专辑
  - 处理重复和变体

#### 4. 数据库更新（第 6 天）
- **重点**:
  - 创建/更新 Track 对象
  - 关联 Artist 和 Release
  - 处理标签（Cluster）

#### 5. 扫描配置（第 7 天）
- **重点**:
  - 媒体库配置
  - 扫描选项
  - 标签分隔符
- **实践**: 配置测试音乐库并触发扫描

### 成功标准
- [ ] 能够理解扫描的完整流程
- [ ] 能够配置媒体库
- [ ] 能够手动触发扫描
- [ ] 理解数据库如何存储扫描结果

---

## 💾 第五阶段：数据库深入（第 4 周）

### 目标
深入理解数据库设计和 ORM 使用

### 学习重点

#### 1. 数据模型（第 1-2 天）
- **文件**: `src/libs/database/include/database/objects/`
- **重点**:
  - Track, Artist, Release, Medium 的关系
  - 多对多关系
  - 用户相关数据

#### 2. Wt::Dbo ORM（第 3-4 天）
- **重点**:
  - 对象映射
  - 关系定义
  - 查询语法
- **实践**: 编写复杂查询

#### 3. 数据库迁移（第 5 天）
- **文件**: `src/libs/database/impl/Migration.cpp`
- **重点**:
  - 版本管理
  - 迁移脚本
  - 数据完整性

#### 4. 查询优化（第 6-7 天）
- **重点**:
  - 索引设计
  - 查询计划
  - 性能优化
- **实践**: 优化一个慢查询

### 成功标准
- [ ] 能够理解所有数据对象的关系
- [ ] 能够编写复杂的数据库查询
- [ ] 能够优化查询性能
- [ ] 理解数据库迁移机制

---

## 🌐 第六阶段：Web UI（第 5-6 周）

### 目标
理解 Wt 框架和 UI 构建

### 学习重点

#### 1. Wt 基础（第 1-2 天）
- **重点**:
  - Wt 应用生命周期
  - Widget 系统
  - 信号和槽
  - 会话管理

#### 2. UI 结构（第 3-4 天）
- **文件**: `src/lms/ui/LmsApplication.hpp`
- **重点**:
  - 应用初始化
  - 页面路由
  - 状态管理

#### 3. XML 模板（第 5 天）
- **文件**: `approot/*.xml`
- **重点**:
  - Wt XML 模板语法
  - 数据绑定
  - 国际化

#### 4. 客户端交互（第 6-7 天）
- **文件**: `docroot/js/mediaplayer.js`
- **重点**:
  - JavaScript 与服务器通信
  - AJAX 请求
  - 实时更新

### 成功标准
- [ ] 能够理解 Wt 应用的基本结构
- [ ] 能够阅读和修改 XML 模板
- [ ] 能够理解客户端-服务器交互
- [ ] 能够创建简单的 UI 组件

---

## 🎮 第七阶段：核心功能（第 7-8 周）

### 目标
实现基本的音乐播放功能

### 学习重点

#### 1. 文件服务（第 1-2 天）
- **重点**:
  - 音频文件下载
  - HTTP 范围请求
  - MIME 类型处理

#### 2. 播放队列（第 3-4 天）
- **重点**:
  - PlayQueue 数据结构
  - 队列管理
  - 播放状态

#### 3. 媒体播放器（第 5-6 天）
- **重点**:
  - HTML5 音频播放
  - 播放控制
  - 进度条更新

#### 4. 转码服务（第 7 天）
- **重点**:
  - FFmpeg 子进程调用
  - 实时转码流
  - 格式选择

### 成功标准
- [ ] 能够提供音频文件下载
- [ ] 能够管理播放队列
- [ ] 能够实现基本的播放控制
- [ ] 理解转码的工作原理

---

## 🚀 第八阶段：高级功能（第 9-10 周）

### 目标
实现推荐、搜索等高级功能

### 学习重点

#### 1. 搜索功能（第 1-2 天）
- **重点**:
  - 全文搜索
  - 搜索算法
  - 结果排序

#### 2. 推荐系统（第 3-5 天）
- **文件**: `src/libs/services/recommendation/`
- **重点**:
  - 基于标签的推荐
  - 相似度计算
  - SOM 算法

#### 3. 播放记录（第 6 天）
- **重点**:
  - Listen 数据模型
  - 播放统计
  - 最近播放列表

#### 4. 用户管理（第 7 天）
- **重点**:
  - 用户创建/编辑
  - 权限管理
  - 认证流程

### 成功标准
- [ ] 能够实现基本的搜索功能
- [ ] 能够理解推荐算法
- [ ] 能够记录和查询播放历史
- [ ] 能够管理用户

---

## 🔌 第九阶段：API 实现（第 11 周）

### 目标
理解并扩展 Subsonic API

### 学习重点

#### 1. Subsonic API（第 1-2 天）
- **文件**: `SUBSONIC.md`
- **重点**:
  - API 端点
  - 请求/响应格式
  - 认证机制

#### 2. API 实现（第 3-5 天）
- **文件**: `src/libs/subsonic/impl/`
- **重点**:
  - 端点实现
  - 参数解析
  - 响应生成

#### 3. 实现新端点（第 6-7 天）
- **实践**: 添加自定义端点

### 成功标准
- [ ] 能够理解 Subsonic API 规范
- [ ] 能够阅读现有端点实现
- [ ] 能够实现新的 API 端点

---

## 📋 每日学习计划示例

### 第 1 周：环境搭建和理解基础

**周一-周二：环境搭建**
- 安装开发工具
- 编译项目
- 运行并测试

**周三：理解程序入口**
- 阅读 `main.cpp`
- 理解启动流程
- 添加日志观察

**周四：理解配置系统**
- 阅读配置文件
- 理解配置 API
- 修改配置测试

**周五：理解数据库**
- 查看数据库结构
- 理解数据对象
- 使用 sqlite3 查询

**周末：复习和实践**
- 完成实践任务 1-5
- 复习本周内容

---

## 🎓 学习技巧

### 1. 循序渐进
- 不要试图一次理解所有内容
- 从简单的模块开始
- 逐步深入

### 2. 动手实践
- 每学一个概念就写代码验证
- 修改代码观察效果
- 遇到问题先尝试自己解决

### 3. 阅读代码
- 从接口开始，再到实现
- 理解设计模式
- 注意错误处理

### 4. 使用工具
- 调试器（GDB）
- 数据库工具（sqlite3）
- 日志系统
- 代码搜索工具

### 5. 记录笔记
- 记录重要概念
- 记录遇到的问题和解决方案
- 记录代码片段

---

## ✅ 学习检查清单

### 环境准备
- [ ] 开发环境搭建完成
- [ ] 项目能够编译
- [ ] 程序能够运行

### 基础理解
- [ ] 理解程序启动流程
- [ ] 理解配置系统
- [ ] 理解日志系统
- [ ] 理解数据库结构

### 核心功能
- [ ] 能够读取音频文件
- [ ] 理解扫描流程
- [ ] 理解播放流程
- [ ] 理解转码流程

### 高级功能
- [ ] 理解推荐系统
- [ ] 理解搜索功能
- [ ] 理解 API 实现

---

## 🆘 遇到问题时

1. **查看日志**：日志通常包含有用的错误信息
2. **查看文档**：README、INSTALL、代码注释
3. **搜索代码**：使用 grep 查找相关代码
4. **使用调试器**：GDB 可以帮助定位问题
5. **查看 GitHub Issues**：可能有人遇到过类似问题
6. **寻求帮助**：在 GitHub Discussions 提问

---

## 🎯 最终目标

完成学习后，你应该能够：

1. ✅ **理解项目架构**：能够解释各个模块的作用和关系
2. ✅ **修改代码**：能够添加新功能或修改现有功能
3. ✅ **调试问题**：能够定位和修复 bug
4. ✅ **优化性能**：能够识别和优化性能瓶颈
5. ✅ **扩展功能**：能够实现新的功能需求

---

## 📚 推荐资源

### 官方文档
- Wt 文档：https://www.webtoolkit.eu/wt/doc/
- TagLib 文档：https://taglib.org/
- FFmpeg 文档：https://ffmpeg.org/documentation.html
- CMake 文档：https://cmake.org/documentation/

### 学习资源
- C++20 教程
- SQLite 教程
- Web 开发基础

---

## 🎉 开始你的学习之旅

现在你已经有了：
- ✅ 完整的项目分析
- ✅ 详细的学习计划
- ✅ 实践任务清单
- ✅ 快速入门指南

**下一步**：
1. 打开 `快速入门指南.md`
2. 开始环境搭建
3. 完成第一个实践任务

**记住**：学习编程是一个渐进的过程，不要急于求成。每天进步一点点，坚持下去，你一定能掌握这个项目！

祝你学习顺利！🎵💻

